from django.shortcuts import renderfrom django.utils.decorators import method_decoratorfrom django.contrib.auth.decorators import login_requiredfrom django.views.generic.edit import CreateViewfrom django.core.paginator import Paginatorfrom core.forms.category_form import CategoryFormfrom core.models.category import Category# @method_decorator(login_required)def category(request):    category_obj = Category.objects.all().order_by('-id')    # pagination    paginator = Paginator(category_obj, 10)    page = request.GET.get('page')    category_obj = paginator.get_page(page)    form = CategoryForm()    # Search query    search_query = request.GET.get('category_obj')    if search_query:        category_obj = category_obj.filter(name__icontains=search_query)    context = {        'category_obj': category_obj,        'form': form    }    template_name = 'category/category.html'    return render(request, template_name, context)class CreateCategory(CreateView):    template_name = 'category/category.html'    form_class = CategoryForm    success_url = '/'    model = Category    fields = ['name', 'parent', 'order_by', 'category_image']